{{ define "main" }}
<article class="course-section" id="{{ .Section }}">
    <div class="container">
        <h1>{{ .Title }}</h1>
        
        {{ with .Params.course_image }}
        <div class="course-image">
            <img src="{{ . | relURL }}" alt="{{ $.Title }}コース図" title="{{ $.Title }}コースの詳細図" loading="lazy" />
        </div>
        {{ end }}

        {{ if .Params.course_specs }}
        <div class="course-data">
            <h2>{{ .Title }}のコース特徴・基本データ</h2>
            <table class="course-specs">
                {{ range $key, $value := .Params.course_specs }}
                <tr>
                    <th>{{ $key }}</th>
                    <td>{{ $value | safeHTML }}</td>
                </tr>
                {{ end }}
            </table>
        </div>
        {{ end }}

        <div class="content">
            {{ .Content }}
        </div>

        {{ if .Params.distances }}
        <div class="distance-explanations">
            {{ range .Params.distances }}
            <div class="distance-item{{ if eq .title "浦和800m攻略法｜スタート勝負の極短距離戦" }} urawa-800m{{ else if eq .title "浦和1300m攻略法｜内枠先行有利の特殊条件" }} urawa-1300m{{ else if eq .title "浦和競馬場1400m｜位置取りと展開が勝敗を分ける主力コース" }} urawa-1400m{{ else if eq .title "浦和競馬場1500m攻略法｜バランス型のコース特徴" }} urawa-1500m{{ else if eq .title "浦和1600m攻略法｜外枠の逃げは困難" }} urawa-1600m{{ else if eq .title "浦和1900m攻略法｜器用さが試される6角コーナー戦" }} urawa-1900m{{ else if eq .title "浦和競馬場2000m攻略法｜総合力が試されるスタミナ勝負の舞台" }} urawa-2000m{{ else if eq .title "川崎競馬場900m攻略法｜スタートで勝負が決まる超短距離コース" }} kawasaki-900m{{ else if eq .title "川崎競馬場1400m攻略法｜内枠有利の典型的スピードコース" }} kawasaki-1400m{{ else if eq .title "川崎競馬場1500m攻略法｜差し脚が決め手となる消耗戦" }} kawasaki-1500m{{ else if eq .title "川崎競馬場1600m攻略法｜重賞レースも組まれる中心距離" }} kawasaki-1600m{{ else if eq .title "川崎競馬場2000m攻略法｜ペース配分と騎手の判断が勝敗を左右" }} kawasaki-2000m{{ else if eq .title "川崎競馬場2100m攻略法｜スタミナと総合力が試される最長距離" }} kawasaki-2100m{{ else if eq .title "船橋競馬場1000m攻略法｜逃げ・先行馬が主導権を握る短距離決戦" }} funabashi-1000m{{ else if eq .title "船橋競馬場1200m攻略法｜外枠が優勢になりやすいハイペース戦" }} funabashi-1200m{{ else if eq .title "船橋競馬場1500m攻略法｜脚質を問わないバランス型コース" }} funabashi-1500m{{ else if eq .title "船橋競馬場1600m攻略法｜公平性の高いマイル戦" }} funabashi-1600m{{ else if eq .title "船橋競馬場1700m攻略法｜外枠不利が少なく先行力が生きる舞台" }} funabashi-1700m{{ else if eq .title "船橋競馬場1800m攻略法｜地力が問われるフラットな舞台" }} funabashi-1800m{{ else if eq .title "船橋競馬場2200m攻略法｜持久力と地力が試される舞台" }} funabashi-2200m{{ else if eq .title "船橋競馬場2400m攻略法｜持久力が問われる長距離コース" }} funabashi-2400m{{ else if eq .title "大井競馬場1000m攻略法｜スタート力と初速が勝敗を分ける超短距離戦" }} ooi-1000m{{ else if eq .title "大井競馬場1200m攻略法｜外枠に厳しいスピード決戦" }} ooi-1200m{{ else if eq .title "大井競馬場1400m攻略法｜内枠優勢で展開予測が勝負のカギ" }} ooi-1400m{{ else if eq .title "大井競馬場1500m攻略法｜内回りコースならではの戦略性" }} ooi-1500m{{ else if eq .title "大井競馬場1600m攻略法｜ペース配分が勝敗を左右するマイル戦" }} ooi-1600m{{ else if eq .title "大井競馬場1650m攻略法｜大井唯一の左回りコース" }} ooi-1650m{{ else if eq .title "大井競馬場1700m攻略法｜外回り直線で実力が試される舞台" }} ooi-1700m{{ else if eq .title "大井競馬場1800m攻略法｜スタミナと展開読みが試される中距離戦" }} ooi-1800m{{ else if eq .title "大井競馬場2000m攻略法｜力が結果に直結するフラットな条件" }} ooi-2000m{{ else if eq .title "大井競馬場2400m攻略法｜スタミナと駆け引きが問われる長距離戦" }} ooi-2400m{{ else if eq .title "大井競馬場2600m攻略法｜スタミナと精神力が試される最長距離戦" }} ooi-2600m{{ end }}">
                <h3>{{ .title }}</h3>
                <p>{{ .description | safeHTML }}</p>
                {{ with .image }}
                <img src="{{ . | relURL }}" alt="コース図" title="コースレイアウト" loading="lazy" />
                {{ end }}
            </div>
            {{ end }}
        </div>
        {{ end }}

        <nav class="section-nav" aria-label="他の競馬場へ">
            <h3>他の南関競馬場も見る</h3>
            <ul>
                {{ $currentSection := .Section }}
                {{ range .Site.Menus.main }}
                    {{ if ne .URL (printf "/%s/" $currentSection) }}
                    <li><a href="{{ .URL }}">{{ .Name }}の攻略法を見る →</a></li>
                    {{ end }}
                {{ end }}
            </ul>
        </nav>
    </div>
</article>
{{ end }}